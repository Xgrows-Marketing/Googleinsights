<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Ads Insights Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            padding: 20px;
            min-height: 100vh;
        }

        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .title {
            font-size: 2rem;
            font-weight: 600;
            color: #4ade80;
        }

        .subtitle {
            color: #9ca3af;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .date-range {
            background: #1f2937;
            padding: 10px 20px;
            border-radius: 10px;
            border: 1px solid #374151;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .date-icon {
            width: 16px;
            height: 16px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            border: 1px solid #374151;
            border-radius: 15px;
            padding: 25px;
            transition: transform 0.2s ease, border-color 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .metric-card:hover {
            transform: translateY(-2px);
            border-color: #4ade80;
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #4ade80, #22d3ee);
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .metric-card:hover::before {
            opacity: 1;
        }

        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .metric-icon {
            width: 24px;
            height: 24px;
            opacity: 0.7;
        }

        .metric-title {
            color: #9ca3af;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .metric-value {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #ffffff, #e5e7eb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .metric-comparison {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .metric-previous {
            color: #6b7280;
            font-size: 0.85rem;
        }

        .metric-change {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .change-positive {
            background: rgba(34, 197, 94, 0.15);
            color: #4ade80;
        }

        .change-negative {
            background: rgba(239, 68, 68, 0.15);
            color: #f87171;
        }

        .arrow-up, .arrow-down {
            width: 12px;
            height: 12px;
        }

        .chart-section {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            border: 1px solid #374151;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .chart-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chart-container {
            width: 100%;
            height: 300px;
            position: relative;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            display: flex;
            align-items: end;
            justify-content: space-around;
            overflow-x: auto;
        }

        .chart-bar {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 80px;
            margin: 0 5px;
        }

        .bar {
            width: 40px;
            border-radius: 4px 4px 0 0;
            transition: all 0.3s ease;
            margin-bottom: 10px;
            position: relative;
        }

        .bar:hover {
            opacity: 0.8;
            transform: scaleY(1.05);
        }

        .bar-positive {
            background: linear-gradient(180deg, #4ade80, #22c55e);
        }

        .bar-negative {
            background: linear-gradient(180deg, #f87171, #ef4444);
        }

        .bar-label {
            color: #9ca3af;
            font-size: 0.75rem;
            text-align: center;
            transform: rotate(-45deg);
            white-space: nowrap;
            margin-top: 10px;
        }

        .bar-value {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7rem;
            color: #e5e7eb;
            font-weight: 600;
        }

        .highlight-metric {
            position: relative;
        }

        .highlight-metric .bar {
            box-shadow: 0 0 20px rgba(74, 222, 128, 0.3);
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
            z-index: 1000;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            
            .title {
                font-size: 1.5rem;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .metric-card {
                padding: 20px;
            }
            
            .metric-value {
                font-size: 1.8rem;
            }
            
            .chart-container {
                height: 250px;
                padding: 15px;
            }
            
            .chart-section {
                padding: 20px;
            }
            
            .bar-label {
                font-size: 0.7rem;
            }
        }

        @media (max-width: 480px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .date-range {
                width: 100%;
                justify-content: center;
            }
            
            .metric-comparison {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        /* Animation for loading effect */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .metric-card {
            animation: slideIn 0.5s ease forwards;
        }

        .metric-card:nth-child(1) { animation-delay: 0.1s; }
        .metric-card:nth-child(2) { animation-delay: 0.2s; }
        .metric-card:nth-child(3) { animation-delay: 0.3s; }
        .metric-card:nth-child(4) { animation-delay: 0.4s; }
        .metric-card:nth-child(5) { animation-delay: 0.5s; }
        .metric-card:nth-child(6) { animation-delay: 0.6s; }
        .metric-card:nth-child(7) { animation-delay: 0.7s; }
        .metric-card:nth-child(8) { animation-delay: 0.8s; }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <div>
                <h1 class="title">Google Ads Insights</h1>

            </div>
            <div class="date-range">
                <svg class="date-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zM4 8h12v8H4V8z"/>
                </svg>
                Aug 23 - Sep 6, 2025 vs Aug 8 - 22, 2025
            </div>
        </div>

        <div class="metrics-grid">
            <!-- Impressions -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">Impressions</span>
                    <svg class="metric-icon" fill="#4ade80" viewBox="0 0 24 24">
                        <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                    </svg>
                </div>
                <div class="metric-value">86,670</div>
                <div class="metric-comparison">
                    <span class="metric-previous">Previous: 38,444</span>
                    <div class="metric-change change-positive">
                        <svg class="arrow-up" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/>
                        </svg>
                        +125.44%
                    </div>
                </div>
            </div>

            <!-- Interactions -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">Interactions</span>
                    <svg class="metric-icon" fill="#4ade80" viewBox="0 0 24 24">
                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                    </svg>
                </div>
                <div class="metric-value">4,872</div>
                <div class="metric-comparison">
                    <span class="metric-previous">Previous: 998</span>
                    <div class="metric-change change-positive">
                        <svg class="arrow-up" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/>
                        </svg>
                        +388.18%
                    </div>
                </div>
            </div>

            <!-- Interaction Rate -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">Interaction Rate</span>
                    <svg class="metric-icon" fill="#4ade80" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                </div>
                <div class="metric-value">5.62%</div>
                <div class="metric-comparison">
                    <span class="metric-previous">Previous: 2.60%</span>
                    <div class="metric-change change-positive">
                        <svg class="arrow-up" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/>
                        </svg>
                        +116.54%
                    </div>
                </div>
            </div>

            <!-- Average Cost -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">Average Cost (CPC)</span>
                    <svg class="metric-icon" fill="#f87171" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91 2.28.6 4.18 1.48 4.18 3.91 0 1.87-1.53 2.49-3.12 2.37z"/>
                    </svg>
                </div>
                <div class="metric-value">$0.20</div>
                <div class="metric-comparison">
                    <span class="metric-previous">Previous: $0.98</span>
                    <div class="metric-change change-negative">
                        <svg class="arrow-down" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M16.707 10.293a1 1 0 010 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 14.586V3a1 1 0 112 0v11.586l4.293-4.293a1 1 0 011.414 0z"/>
                        </svg>
                        -79.43%
                    </div>
                </div>
            </div>

            <!-- Total Cost -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">Total Cost</span>
                    <svg class="metric-icon" fill="#4ade80" viewBox="0 0 24 24">
                        <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                    </svg>
                </div>
                <div class="metric-value">$982.81</div>
                <div class="metric-comparison">
                    <span class="metric-previous">Previous: $978.71</span>
                    <div class="metric-change change-positive">
                        <svg class="arrow-up" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/>
                        </svg>
                        +0.42%
                    </div>
                </div>
            </div>

            <!-- Conversion Rate -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">Conversion Rate</span>
                    <svg class="metric-icon" fill="#f87171" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                </div>
                <div class="metric-value">0.57%</div>
                <div class="metric-comparison">
                    <span class="metric-previous">Previous: 4.51%</span>
                    <div class="metric-change change-negative">
                        <svg class="arrow-down" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M16.707 10.293a1 1 0 010 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 14.586V3a1 1 0 112 0v11.586l4.293-4.293a1 1 0 011.414 0z"/>
                        </svg>
                        -87.27%
                    </div>
                </div>
            </div>

            <!-- Conversions -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">Conversions</span>
                    <svg class="metric-icon" fill="#f87171" viewBox="0 0 24 24">
                        <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                    </svg>
                </div>
                <div class="metric-value">27.98</div>
                <div class="metric-comparison">
                    <span class="metric-previous">Previous: 45.02</span>
                    <div class="metric-change change-negative">
                        <svg class="arrow-down" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M16.707 10.293a1 1 0 010 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 14.586V3a1 1 0 112 0v11.586l4.293-4.293a1 1 0 011.414 0z"/>
                        </svg>
                        -37.83%
                    </div>
                </div>
            </div>

            <!-- Cost per Conversion -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">Cost per Conversion</span>
                    <svg class="metric-icon" fill="#4ade80" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91 2.28.6 4.18 1.48 4.18 3.91 0 1.87-1.53 2.49-3.12 2.37z"/>
                    </svg>
                </div>
                <div class="metric-value">$35.12</div>
                <div class="metric-comparison">
                    <span class="metric-previous">Previous: $21.74</span>
                    <div class="metric-change change-positive">
                        <svg class="arrow-up" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/>
                        </svg>
                        +61.53%
                    </div>
                </div>
            </div>
        </div>

        <!-- Performance Overview Chart -->
        <div class="chart-section">
            <h2 class="chart-title">
                <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                </svg>
                Performance Overview
            </h2>
            <div class="chart-container">
                <div class="chart-bar highlight-metric">
                    <div class="bar bar-positive" style="height: 180px;">
                        <div class="bar-value">+125.44%</div>
                    </div>
                    <div class="bar-label">Impressions</div>
                </div>
                <div class="chart-bar">
                    <div class="bar bar-positive" style="height: 220px;">
                        <div class="bar-value">+388.18%</div>
                    </div>
                    <div class="bar-label">Interactions</div>
                </div>
                <div class="chart-bar">
                    <div class="bar bar-positive" style="height: 160px;">
                        <div class="bar-value">+116.54%</div>
                    </div>
                    <div class="bar-label">Interaction Rate</div>
                </div>
                <div class="chart-bar">
                    <div class="bar bar-negative" style="height: 120px;">
                        <div class="bar-value">-79.43%</div>
                    </div>
                    <div class="bar-label">Avg Cost</div>
                </div>
                <div class="chart-bar">
                    <div class="bar bar-positive" style="height: 20px;">
                        <div class="bar-value">+0.42%</div>
                    </div>
                    <div class="bar-label">Total Cost</div>
                </div>
                <div class="chart-bar">
                    <div class="bar bar-negative" style="height: 140px;">
                        <div class="bar-value">-87.27%</div>
                    </div>
                    <div class="bar-label">Conv. Rate</div>
                </div>
                <div class="chart-bar">
                    <div class="bar bar-negative" style="height: 80px;">
                        <div class="bar-value">-37.83%</div>
                    </div>
                    <div class="bar-label">Conversions</div>
                </div>
                <div class="chart-bar">
                    <div class="bar bar-positive" style="height: 100px;">
                        <div class="bar-value">+61.53%</div>
                    </div>
                    <div class="bar-label">Cost per Conv.</div>
                </div>
            </div>
        </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
        // Load data from localStorage or use default data
        function loadDashboardData() {
            const storedData = localStorage.getItem('googleAdsData');
            
            if (storedData) {
                return JSON.parse(storedData);
            }
            
            // Default/fallback data
            return {
                dateRange: "Aug 23 - Sep 6, 2025 vs Aug 8 - 22, 2025",
                impressions: { current: 86670, previous: 38444, change: 125.44 },
                interactions: { current: 4872, previous: 998, change: 388.18 },
                interactionRate: { current: 5.62, previous: 2.60, change: 116.54 },
                avgCost: { current: 0.20, previous: 0.98, change: -79.43 },
                totalCost: { current: 982.81, previous: 978.71, change: 0.42 },
                conversionRate: { current: 0.57, previous: 4.51, change: -87.27 },
                conversions: { current: 27.98, previous: 45.02, change: -37.83 },
                costPerConversion: { current: 35.12, previous: 21.74, change: 61.53 }
            };
        }

        // Format number with commas
        function formatNumber(num) {
            return num.toLocaleString();
        }

        // Format currency
        function formatCurrency(num) {
            return '
</body>
</html> + num.toFixed(2);
        }

        // Format percentage
        function formatPercentage(num) {
            return num.toFixed(2) + '%';
        }

        // Update dashboard with data
        function updateDashboard() {
            const data = loadDashboardData();

            // Update date range
            if (data.dateRange) {
                const dateRangeText = document.getElementById('dateRangeText');
                if (dateRangeText) {
                    dateRangeText.textContent = data.dateRange;
                }
            }

            // Update all metrics
            const metrics = [
                { key: 'impressions', selector: '.metric-card:nth-child(1)', formatter: formatNumber },
                { key: 'interactions', selector: '.metric-card:nth-child(2)', formatter: formatNumber },
                { key: 'interactionRate', selector: '.metric-card:nth-child(3)', formatter: formatPercentage },
                { key: 'avgCost', selector: '.metric-card:nth-child(4)', formatter: formatCurrency },
                { key: 'totalCost', selector: '.metric-card:nth-child(5)', formatter: formatCurrency },
                { key: 'conversionRate', selector: '.metric-card:nth-child(6)', formatter: formatPercentage },
                { key: 'conversions', selector: '.metric-card:nth-child(7)', formatter: (num) => num.toFixed(2) },
                { key: 'costPerConversion', selector: '.metric-card:nth-child(8)', formatter: formatCurrency }
            ];

            metrics.forEach(metric => {
                const card = document.querySelector(metric.selector);
                if (card && data[metric.key]) {
                    const valueElement = card.querySelector('.metric-value');
                    const previousElement = card.querySelector('.metric-previous');
                    const changeElement = card.querySelector('.metric-change');
                    const arrowElement = changeElement?.querySelector('svg');

                    if (valueElement) {
                        valueElement.textContent = metric.formatter(data[metric.key].current);
                    }

                    if (previousElement) {
                        previousElement.textContent = `Previous: ${metric.formatter(data[metric.key].previous)}`;
                    }

                    if (changeElement && arrowElement) {
                        const change = data[metric.key].change;
                        const isPositive = change >= 0;
                        
                        changeElement.className = `metric-change ${isPositive ? 'change-positive' : 'change-negative'}`;
                        changeElement.innerHTML = `
                            <svg class="${isPositive ? 'arrow-up' : 'arrow-down'}" fill="currentColor" viewBox="0 0 20 20">
                                <path d="${isPositive ? 
                                    'M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z' :
                                    'M16.707 10.293a1 1 0 010 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 14.586V3a1 1 0 112 0v11.586l4.293-4.293a1 1 0 011.414 0z'
                                }"/>
                            </svg>
                            ${isPositive ? '+' : ''}${change.toFixed(2)}%
                        `;
                    }
                }
            });

            // Update chart bars
            const chartBars = document.querySelectorAll('.chart-bar .bar');
            const chartData = [
                { change: data.impressions.change, label: 'Impressions' },
                { change: data.interactions.change, label: 'Interactions' },
                { change: data.interactionRate.change, label: 'Interaction Rate' },
                { change: data.avgCost.change, label: 'Avg Cost' },
                { change: data.totalCost.change, label: 'Total Cost' },
                { change: data.conversionRate.change, label: 'Conv. Rate' },
                { change: data.conversions.change, label: 'Conversions' },
                { change: data.costPerConversion.change, label: 'Cost per Conv.' }
            ];

            chartBars.forEach((bar, index) => {
                if (chartData[index]) {
                    const change = chartData[index].change;
                    const isPositive = change >= 0;
                    const height = Math.min(Math.abs(change) * 2, 200); // Scale height
                    
                    bar.className = `bar ${isPositive ? 'bar-positive' : 'bar-negative'}`;
                    bar.style.height = `${Math.max(height, 20)}px`;
                    
                    const valueElement = bar.querySelector('.bar-value');
                    if (valueElement) {
                        valueElement.textContent = `${isPositive ? '+' : ''}${change.toFixed(2)}%`;
                    }
                }
            });

            // Add last updated info
            if (data.lastUpdated) {
                const lastUpdated = new Date(data.lastUpdated).toLocaleString();
                console.log(`Dashboard last updated: ${lastUpdated}`);
            }
        }

        // Add interactivity
        document.addEventListener('DOMContentLoaded', function() {
            // Load and update dashboard with data
            updateDashboard();

            const bars = document.querySelectorAll('.bar');
            const tooltip = document.getElementById('tooltip');

            bars.forEach(bar => {
                bar.addEventListener('mouseenter', function(e) {
                    const value = this.querySelector('.bar-value').textContent;
                    const label = this.parentElement.querySelector('.bar-label').textContent;
                    
                    tooltip.innerHTML = `${label}: ${value}`;
                    tooltip.style.opacity = '1';
                    tooltip.style.left = e.pageX + 10 + 'px';
                    tooltip.style.top = e.pageY - 10 + 'px';
                });

                bar.addEventListener('mousemove', function(e) {
                    tooltip.style.left = e.pageX + 10 + 'px';
                    tooltip.style.top = e.pageY - 10 + 'px';
                });

                bar.addEventListener('mouseleave', function() {
                    tooltip.style.opacity = '0';
                });
            });

            // Add click animation to metric cards
            const metricCards = document.querySelectorAll('.metric-card');
            metricCards.forEach(card => {
                card.addEventListener('click', function() {
                    this.style.transform = 'scale(0.98)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                });
            });

            // Animate bars on scroll
            const observerOptions = {
                threshold: 0.5,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-in');
                    }
                });
            }, observerOptions);

            bars.forEach(bar => {
                observer.observe(bar);
            });

            // Check for data updates every 30 seconds
            setInterval(() => {
                const currentData = JSON.stringify(loadDashboardData());
                const lastKnownData = sessionStorage.getItem('lastDashboardData');
                
                if (lastKnownData !== currentData) {
                    console.log('Data updated, refreshing dashboard...');
                    updateDashboard();
                    sessionStorage.setItem('lastDashboardData', currentData);
                }
            }, 30000);
        });
    </script>
</body>
</html>
